{
  "version": 3,
  "sources": ["../js/App.jsx", "../js/About.jsx", "../js/Animation.js", "../js/ControlPanel.js", "../js/lib/three-custom/raycaster.js", "../js/Scene.js", "../js/Celestiary.js", "../js/TimePanel.jsx"],
  "sourcesContent": ["import React from 'react'\nimport {useLocation} from 'react-router-dom'\nimport AboutButton from './About'\nimport Celestiary from './Celestiary'\nimport HelpButton from './Help'\nimport TimePanel from './TimePanel'\nimport * as collapsor from './collapsor'\nimport {elt, setTitleFromLocation} from './utils'\nimport './index.css'\n\n\nexport default function App() {\n  const location = useLocation()\n  React.useEffect(() => {\n    setTitleFromLocation(location)\n  }, [location])\n\n  const [celestiary, setCelestiary] = React.useState(null)\n  const [timeStr, setTimeStr] = React.useState('')\n  const [showAbout, setShowAbout] = React.useState(false)\n  React.useEffect(() => {\n    setCelestiary(new Celestiary(elt('scene-id'), elt('nav-id'), setTimeStr))\n  }, [])\n\n  return (\n    <>\n      <div id=\"scene-id\"/>\n      <div id=\"nav-id\" className=\"panel\">Welcome to Celestiary!  Loading...</div>\n      <div id=\"top-right\" className=\"panel\">\n        {celestiary && <TimePanel time={celestiary.time} timeStr={timeStr}/>}\n        <div id=\"text-buttons\">\n          {celestiary && <HelpButton keys={celestiary.keys} />}\n          <AboutButton/>\n        </div>\n      </div>\n      <h1 id=\"target-id\"></h1>\n    </>)\n}\n", "import React from 'react'\nimport {Link} from 'react-router-dom'\n\n\nexport default function AboutButton() {\n  const [open, setOpen] = React.useState(false)\n  const toggleOpen = () => {\n    setOpen(!open)\n  }\n  return (\n    <>\n      <button onClick={toggleOpen} className=\"textButton\">About</button>\n      {open && <About openToggle={toggleOpen}/>}\n    </>)\n}\n\n\nfunction About({openToggle}) {\n  return (\n    <div className=\"dialog\">\n      <button onClick={openToggle}>X</button>\n      <h1>About</h1>\n  Celestiary is a cosmological simulator.\n\n      <h2>News</h2>\n      <ul>\n        <li>2021 Dec 30 - Introduce esbuild with code splitting.  Use react\n      and react-router to improve code structure and prepare for better\n      permalinks.</li>\n        <li>2021 Jan 25 - Works in Safari 13.1.2+ on OSX, maybe earlier.\n      Now all major browsers tested except IE.</li>\n      </ul>\n\n      <h2>Features</h2>\n      <ul>\n        <li>Keplerian orbits (6 orbital elements)</li>\n        <li>Time controls, to alter rate and direction of time</li>\n        <li>Star colors based on surface temperatures</li>\n        <li>Star surface dynamics simulation (Perlin noise in black-body spectra)</li>\n        <li>9 planets, 20 moons</li>\n        <li>Permanent links for scene locations</li>\n        <li>Even kinda works on mobile! :)</li>\n      </ul>\n      <h2>Datasets</h2>\n      <ul>\n        <li>~100,000 stars</li>\n        <li>~3k star names</li>\n        <li>~80 Asterisms/constellations</li>\n      </ul>\n      <h2>Learn more</h2>\n      <ul>\n        <li><Link to=\"/guide\">Software development guide</Link></li>\n        <li><a href=\"https://github.com/pablo-mayrgundter/celestiary\" target=\"_blank\" rel=\"noreferrer\">Source code (GitHub)</a></li>\n      </ul>\n    </div>)\n}\n", "import {Vector3} from 'three'\nimport * as Shared from './shared.js'\n\n\n// TODO: move this to scene.\nexport default class Animation {\n  constructor(time) {\n    this.time = time\n    this.Y_AXIS = new Vector3(0, 1, 0)\n  }\n\n\n  animate(scene) {\n    this.time.updateTime()\n    this.animateSystem(scene, this.time.simTime / 1000)\n  }\n\n\n  /**\n   * Recursive animation of orbits and rotations at the current time.\n   * @param {!Object3D} system\n   */\n  animateSystem(system, simTimeSecs) {\n    if (system.preAnimCb) {\n      system.preAnimCb(this.time)\n    }\n    if (system.siderealRotationPeriod) {\n      // TODO(pablo): this is hand-calibrated for Earth and so is\n      // incorrect for the other planets.  Earth Orientation Parameters\n      // are here:\n      //\n      //   http://hpiers.obspm.fr/eop-pc/index.php?index=orientation\n      //\n      // and also would also need them for the other planets.\n      const angle = 1.5 * Math.PI + simTimeSecs / 86400 * Shared.twoPi\n      system.setRotationFromAxisAngle(this.Y_AXIS, angle)\n    }\n\n    // This is referred to by a comment in scene.js#addOrbitingPlanet.\n    if (system.orbit) {\n      const eccentricity = system.orbit.eccentricity\n      const aRadius = system.orbit.semiMajorAxis.scalar * Shared.LENGTH_SCALE\n      const bRadius = aRadius * Math.sqrt(1.0 - Math.pow(eccentricity, 2.0))\n      // -1.0 because orbits are counter-clockwise when viewed from above North of Earth.\n      const angle = -1.0 * simTimeSecs / system.orbit.siderealOrbitPeriod.scalar * Shared.twoPi\n      const x = aRadius * Math.cos(angle)\n      const y = 0\n      const z = bRadius * Math.sin(angle)\n      // console.log(`${eccentricity} ${aRadius} ${bRadius} ${simTimeSecs} ${system.orbit.siderealOrbitPeriod}`);\n      system.position.set(x, y, z)\n      if (system.postAnimCb) {\n        system.postAnimCb(system)\n      }\n    }\n\n    for (const ndx in system.children) {\n      const child = system.children[ndx]\n      this.animateSystem(child, simTimeSecs)\n    }\n  }\n}\n", "import Measure from '@pablo-mayrgundter/measure.js'\nimport * as collapsor from './collapsor.js'\nimport {capitalize} from './utils.js'\nimport {StarSpectra} from './StarsCatalog.js'\n\n\nexport default class ControlPanel {\n  constructor(containerElt, loader) {\n    this.containerElt = containerElt\n    this.loader = loader\n  }\n\n  getPathTarget(path) {\n    return path[path.length - 1]\n  }\n\n  showNavDisplay(path) {\n    let crumbs = ''\n    for (let i = 0; i < path.length; i++) {\n      const hash = path.slice(0, i + 1).join('/')\n      const name = path[i]\n      if (i == path.length - 1) {\n        crumbs += capitalize(name)\n      } else {\n        crumbs += '<a href=\"#'+ hash +'\">' + capitalize(name) + '</a>'\n      }\n      if (i < path.length - 1) {\n        crumbs += ' &gt; '\n      }\n    }\n\n    let html = crumbs + ' <ul>\\n'\n    const pathPrefix = path.join('/')\n    html += this.showInfoRecursive(this.loader.loaded[this.getPathTarget(path)],\n        pathPrefix, false, false)\n    html += '</ul>\\n'\n    this.containerElt.innerHTML = html\n    collapsor.makeCollapsable(this.containerElt)\n  }\n\n\n  showInfoRecursive(obj, pathPrefix, isArray, isSystem) {\n    function cleanZeros(num) {\n      const str = num+''\n      return str.replace(/0000+\\d+/, ' ')\n    }\n    let html = ''\n    for (const prop in obj) {\n      if (prop == 'name' || prop == 'parent' || prop.startsWith('texture_') ||\n         prop == 'apparentMagnitude' || prop == 'colorIndex') {\n        continue\n      }\n      if (obj.hasOwnProperty(prop)) {\n        let val = obj[prop]\n        if (prop == 'system' && typeof val == 'object' && Array.isArray(val) && val.length == 0) {\n          continue\n        }\n        html += '<li>'\n        if (!isArray) {\n          let prettyName = prop\n          switch (prop) {\n            case 'axialInclination': prettyName = 'tilt'; break\n            case 'siderealRotationPeriod': prettyName = 'rotation period'; break\n            case 'spectralType': prettyName = 'star class'; break\n          }\n          html += prettyName + ': '\n        }\n        if (val instanceof Measure) {\n          switch (prop) {\n            case 'radius': val = val.convertTo(Measure.Magnitude.KILO); break\n            case 'mass': val = val.convertTo(Measure.Magnitude.KILO); break\n            case 'semiMajorAxis':\n              // TODO\n              if (typeof val.scalar == 'string') {\n                val.scalar = parseFloat(val.scalar)\n              }\n              val.scalar = val.scalar.toExponential(4)\n              val = val.toString()\n              break\n            case 'siderealOrbitPeriod':\n              val = secsToYDHMS(val.scalar)\n              break\n            case 'siderealRotationPeriod':\n              val = secsToYDHMS(val.scalar)\n              break\n          }\n          html += cleanZeros(val)\n        } else if (val instanceof Array) {\n          if (prop == 'system') {\n            html += '<ol>\\n'\n          } else {\n            html += '<ol class=\"collapsed\">\\n'\n          }\n          html += this.showInfoRecursive(val, pathPrefix, true, prop == 'system')\n          html += '</ol>\\n'\n        } else if (val instanceof Object) {\n          html += '<ul class=\"collapsed\">\\n'\n          html += this.showInfoRecursive(val, pathPrefix, false, false)\n          html += '</ul>\\n'\n        } else {\n          if (isSystem) {\n            let path = pathPrefix\n            if (pathPrefix.length > 0) {\n              path += '/'\n            }\n            path += val\n            html += '<a href=\"#' + path + '\">'\n            html += capitalize(val)\n          } else {\n            switch (prop) {\n              case 'spectralType':\n                const ndx = parseInt(val)\n                if (ndx >= 0) {\n                  val = StarSpectra[ndx][3]\n                }\n                break\n              case 'equatorialGravity':\n              case 'escapeVelocity':\n                val = val + ' m/s^2'\n                break\n              case 'axialInclination': val = val + '\u00B0'; break\n            }\n            html += val\n          }\n          if (isSystem) {\n            html += '</a>'\n          }\n        }\n        html += '</li>\\n'\n      }\n    }\n    html = html.replaceAll('^2', '\u00B2')\n    html = html.replaceAll('^3', '\u00B3')\n    return html\n  }\n}\n\n\nfunction secsToYDHMS(s) {\n  const secsPerYear = 86400 * 365\n  let str = ''\n  const years = parseInt(s / secsPerYear)\n  if (years > 0) {\n    s -= years * secsPerYear\n    str += `${years}y`\n  }\n  const days = parseInt(s / 86400)\n  if (days > 0) {\n    s -= days * 86400\n    str += ` ${days}d`\n  }\n  const hours = parseInt(s / 3600)\n  if (hours > 0) {\n    s -= hours * 3600\n    str += ` ${hours}h`\n  }\n  const minutes = parseInt(s / 60)\n  if (minutes > 0) {\n    s -= minutes * 60\n    str += ` ${minutes}m`\n  }\n  const seconds = parseInt(s)\n  if (seconds > 0) {\n    str += ` ${seconds}s`\n  }\n  return str\n}\n", "// From https://github.com/mrdoob/three.js/blob/34dc2478c684066257e4e39351731a93c6107ef5/src/core/Raycaster.js\nimport {Ray} from 'three'\n\n/**\n * Custom version of Raycaster for Celestiary that uses distanceToRay\n * instead of distance to screen for closest sort.\n *\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n * @author pablo\n */\nexport default function CustomRaycaster( origin, direction, near, far ) {\n  this.ray = new Ray( origin, direction )\n  // direction is assumed to be normalized (for accurate distance calculations)\n\n  this.near = near || 0\n  this.far = far || Infinity\n\n  this.params = {\n    Mesh: {},\n    Line: {},\n    LOD: {},\n    Points: {threshold: 1},\n    Sprite: {},\n  }\n\n  Object.defineProperties( this.params, {\n    PointCloud: {\n      get: function() {\n        console.warn( 'CustomRaycaster: params.PointCloud has been renamed to params.Points.' )\n        return this.Points\n      },\n    },\n  } )\n}\n\nfunction ascSort( a, b ) {\n  return a.distanceToRay - b.distanceToRay\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n  if ( object.visible === false ) return\n  object.raycast( raycaster, intersects )\n  if ( recursive === true ) {\n    const children = object.children\n    for ( let i = 0, l = children.length; i < l; i ++ ) {\n      intersectObject( children[i], raycaster, intersects, true )\n    }\n  }\n}\n\nObject.assign( CustomRaycaster.prototype, {\n\n  linePrecision: 1,\n\n  set: function( origin, direction ) {\n    // direction is assumed to be normalized (for accurate distance calculations)\n    this.ray.set( origin, direction )\n  },\n\n  setFromCamera: function( coords, camera ) {\n    if ( ( camera && camera.isPerspectiveCamera ) ) {\n      this.ray.origin.setFromMatrixPosition( camera.matrixWorld )\n      this.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize()\n    } else if ( ( camera && camera.isOrthographicCamera ) ) {\n      this.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ) // set origin in plane of camera\n      this.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld )\n    } else {\n      console.error( 'CustomRaycaster: Unsupported camera type.' )\n    }\n  },\n\n  intersectObject: function( object, recursive, optionalTarget ) {\n    const intersects = optionalTarget || []\n    intersectObject( object, this, intersects, recursive )\n    intersects.sort( ascSort )\n    return intersects\n  },\n\n  intersectObjects: function( objects, recursive, optionalTarget ) {\n    const intersects = optionalTarget || []\n    if ( Array.isArray( objects ) === false ) {\n      console.warn( 'CustomRaycaster.intersectObjects: objects is not an Array.' )\n      return intersects\n    }\n    for ( let i = 0, l = objects.length; i < l; i ++ ) {\n      intersectObject( objects[i], this, intersects, recursive )\n    }\n    intersects.sort( ascSort )\n    return intersects\n  },\n} )\n", "import {\n  Object3D,\n  Raycaster,\n  Vector2,\n  Vector3,\n} from 'three'\nimport CustomRaycaster from './lib/three-custom/raycaster.js'\nimport createTree from '@pablo-mayrgundter/yaot2'\n\nimport Asterisms from './Asterisms.js'\nimport Object from './object.js'\nimport Planet from './Planet.js'\nimport SpriteSheet from './SpriteSheet.js'\nimport Star from './Star.js'\nimport Stars from './Stars.js'\nimport * as Material from './material.js'\nimport * as Shared from './shared.js'\nimport * as Shapes from './shapes.js'\nimport * as Utils from './utils.js'\nimport {marker as createMarker} from './shapes'\nimport {queryPoints} from './Picker'\nimport {info} from './log.js'\n\n\nconst\n  lengthScale = Shared.LENGTH_SCALE\nconst INITIAL_STEP_BACK_MULT = 10\n\n\nexport default class Scene {\n  constructor(ui) {\n    this.ui = ui\n    this.objects = {}\n    this.mouse = new Vector2\n    this.raycaster = new Raycaster\n    // this.raycaster = new CustomRaycaster;\n    this.raycaster.params.Points.threshold = 3\n    ui.addClickCb((click) => {\n      this.onClick(click)\n    })\n    this.stars = null\n    this.asterisms = null\n    this.marker = createMarker()\n    this.marker.visible = true\n    this.ui.scene.add(this.marker)\n    this.starSelected = false\n  }\n\n\n  /**\n   * Add an object to the scene.\n   * @param {!object} props object properties, must include type.\n   */\n  add(props) {\n    const name = props.name\n    let parentObj = this.objects[props.parent]\n    let parentOrbitPosition = this.objects[props.parent + '.orbitPosition']\n    if (props.name == 'milkyway' || props.name == 'sun') {\n      parentObj = parentOrbitPosition = this.ui.scene\n    }\n    if (!parentObj || !parentOrbitPosition) {\n      throw new Error(`No parent obj: ${parentObj} or pos: ${parentOrbitPosition} for ${name}`)\n    }\n    const obj3d = this.objectFactory(props)\n    // Add to scene in reference frame of parent's orbit position,\n    // e.g. moons orbit planets, so they have to be added to the\n    // planet's orbital center.\n    parentOrbitPosition.add(obj3d)\n    return obj3d\n  }\n\n\n  objectFactory(props) {\n    switch (props.type) {\n      case 'galaxy': return this.newGalaxy(props)\n      case 'stars':\n        let pickedStarLabel\n        this.stars = new Stars(props, () => {\n          this.stars.showLabels()\n          const tree = createTree()\n          tree.init(this.stars.geom.coords)\n          const traceCb = (e) => {\n            queryPoints(this.ui, e, tree, this.stars, (pick) => {\n              if (!this.starSelected) {\n                this.marker.position.copy(pick)\n              }\n              if (pickedStarLabel != null) {\n                pickedStarLabel.removeFromParent()\n              }\n              const starName = '' + this.stars.catalog.getNameOrId(pick.star.hipId)\n              const pickedLabelSheet = new SpriteSheet(1, starName, undefined, [0, 1e5])\n              pickedLabelSheet.add(pick.x, pick.y, pick.z, starName)\n              pickedStarLabel = pickedLabelSheet.compile()\n              this.ui.scene.add(pickedStarLabel)\n            })\n          }\n          const markCb = (e) => {\n            queryPoints(this.ui, e, tree, this.stars, (pick) => {\n              if (this.starSelected) {\n                this.marker.position.copy(pick)\n              }\n              this.starSelected = !this.starSelected\n            /*\n            let tStar;\n            if (pick.star.hipId != 0) {\n              console.log('Adding new star: ', pick.star)\n              pick.star.name = this.stars.catalog.namesByHip[pick.star.hipId];\n              pick.star.type = 'star'; // todo: looks like this unintentionally override Three.js Object3D.\n              pick.star.parent = 'milkyway';\n              pick.star.radius = {\n                scalar: pick.star.radius,\n              };\n              tStar = this.add(pick.star);\n              window.star = tStar;\n              tStar.position.copy(pick);\n            } else {\n              tStar = this.objects['sun']// todo\n            }\n            window.sun = this.objects['sun'];\n            window.mw = this.objects['milkyway.orbitPosition'];\n            console.log('PICKED: ', window.star.name);\n            //Shared.targets.obj = tStar;\n            //Shared.targets.pos.copy(tStar.position);\n            //Shared.targets.track = tStar;\n            //Shared.targets.follow = tStar;\n            //window.mw.position.set(new Vector3);\n            window.mw.position.sub(tStar.position);\n            //Shared.targets.obj.position.sub(tStar.position);\n            const v = new Vector3;\n            this.marker.position.copy(v);\n            this.marker.visible = false;\n            v.set(0, 0, -tStar.props.radius.scalar * Shared.LENGTH_SCALE * 0.5e2);\n            this.ui.camera.platform.position.copy(v);\n            console.log('Shared.targets: ', Shared.targets.obj, Shared.targets.pos);\n            */\n            })\n          }\n          document.body.addEventListener('dblclick', markCb)\n          document.body.addEventListener('mousemove', traceCb)\n        })\n        return this.stars\n      case 'star': return new Star(props, this.objects, this.ui)\n      case 'planet': return new Planet(this, props)\n      case 'moon': return new Planet(this, props, true)\n    }\n    throw new Error(`Object has unknown type: ${props.type}`)\n  }\n\n\n  /**\n   * A primary scene object composed.\n   */\n  newObject(name, props, onClick) {\n    const obj = this.newGroup(name, props)\n    if (!onClick) {\n      throw new Error('Must provide an onClick handler')\n    }\n    obj.onClick = onClick\n    return obj\n  }\n\n\n  /**\n   * A secondary grouping of scene objects.\n   * @param name Prefix, attached to .frame suffix.\n   * @param props Optional props to attach to a .props field on the frame.\n   */\n  newGroup(name, props) {\n    const obj = new Object3D\n    this.objects[name] = obj\n    obj.name = name\n    if (props) {\n      obj.props = props\n    }\n    return obj\n  }\n\n\n  targetNamed(name) {\n    this.setTarget(name)\n    this.lookAtTarget()\n  }\n\n\n  targetParent() {\n    const cObj = Shared.targets.cur\n    if (cObj && cObj.props && cObj.props.parent) {\n      this.setTarget(cObj.props.parent)\n    }\n  }\n\n\n  targetNode(index) {\n    const cObj = Shared.targets.cur\n    if (cObj && cObj.props && cObj.props.system && cObj.props.system) {\n      const sys = cObj.props.system\n      if (sys[index - 1]) {\n        this.setTarget(sys[index - 1])\n      }\n    }\n  }\n\n\n  targetCurNode() {\n    const cObj = Shared.targets.cur\n    if (cObj && cObj.props && cObj.props.name) {\n      this.setTarget(cObj.props.name)\n    }\n  }\n\n\n  setTarget(name) {\n    const obj = this.objects[name]\n    if (!obj) {\n      throw new Error(`scene#setTarget: no matching target: ${name}`)\n    }\n    Shared.targets.obj = obj\n  }\n\n\n  lookAtTarget() {\n    if (!Shared.targets.obj) {\n      console.error('scene.js#lookAtTarget: no target obj to look at.')\n      return\n    }\n    const obj = Shared.targets.obj\n    const tPos = Shared.targets.pos\n    this.ui.scene.updateMatrixWorld()\n    tPos.setFromMatrixPosition(obj.matrixWorld)\n    this.ui.camera.lookAt(tPos)\n  }\n\n\n  goTo() {\n    if (!Shared.targets.obj) {\n      console.error('Scene.goTo called with no target obj.')\n      return\n    }\n    const obj = Shared.targets.obj\n    const tPos = Shared.targets.pos\n    this.ui.scene.updateMatrixWorld()\n    tPos.setFromMatrixPosition(obj.matrixWorld)\n    const pPos = new Vector3\n    const cPos = new Vector3\n    const surfaceAltitude = obj.props.radius.scalar * lengthScale\n    pPos.set(0, 0, 0) // TODO(pablo): maybe put platform at surfaceAltitude\n    cPos.set(0, 0, surfaceAltitude * INITIAL_STEP_BACK_MULT)\n    obj.orbitPosition.add(this.ui.camera.platform)\n    this.ui.camera.platform.position.copy(pPos)\n    this.ui.camera.platform.lookAt(Shared.targets.origin)\n    this.ui.camera.position.copy(cPos)\n    this.ui.camera.lookAt(tPos)\n    Shared.targets.track = Shared.targets.cur = Shared.targets.obj\n    this.ui.controls.update()\n  }\n\n\n  track(name) {\n    if (Shared.targets.track) {\n      Shared.targets.track = null\n    } else {\n      Shared.targets.track = Shared.targets.obj\n    }\n  }\n\n\n  follow(name) {\n    if (Shared.targets.follow) {\n      delete Shared.targets.follow.postAnimCb\n      Shared.targets.follow = null\n    } else {\n      if (Shared.targets.obj) {\n        if (Shared.targets.obj.orbitPosition) {\n          // Follow the orbit position for less jitter.\n          const followed = Shared.targets.obj.orbitPosition\n          Shared.targets.follow = followed\n\n          followed.postAnimCb = (obj) => {\n            this.ui.camera.platform.lookAt(Shared.targets.origin)\n          }\n\n          followed.postAnimCb(followed)\n        } else {\n          console.error('Target to follow has no orbitPosition property.')\n        }\n      } else {\n        console.error('No target object to follow.')\n      }\n    }\n  }\n\n\n  onClick(mouse) {\n    if (true) return // Disable picking for now.\n    this.ui.scene.updateMatrixWorld()\n    this.raycaster.setFromCamera(mouse, this.ui.camera)\n    const t = Date.now()\n    const intersects = this.raycaster.intersectObjects(this.ui.scene.children, true)\n    const elapsedSeconds = (Date.now() - t) / 1000\n    if (elapsedSeconds > 0.1) {\n      console.error('Scene picking taking a long time (seconds): ', elapsedSeconds)\n    }\n    if (intersects.length == 0) {\n      return\n    }\n    // console.log('checking all the things');\n    let nearestMeshIntersect; let nearestPointIntersect\n    let nearestStarPointIntersect; let nearestDefaultIntersect\n    // TODO: this is looping through all 8k asterisms.. that right?\n    for (let i = 0; i < intersects.length; i++) {\n      const intersect = intersects[i]\n      const dist = intersect.distance\n      const obj = intersect.object\n      if (obj.isAnchor) {\n        console.log('raycast skipping anchor')\n        continue\n      }\n      if (obj.type == 'Line') {\n        continue\n      }\n      // console.log(`intersect ${i} dist: ${dist}, type: ${obj.type}, obj: `, obj);\n      switch (obj.type) {\n        case 'Mesh': {\n          if (nearestMeshIntersect &&\n              nearestMeshIntersect.distance < dist) {\n            continue\n          }\n          nearestMeshIntersect = intersect\n        } break\n        case 'Points': {\n          if (obj.isStarPoints) {\n            if (nearestStarPointIntersect &&\n                nearestStarPointIntersect.distanceToRay < intersect.distanceToRay) {\n              continue\n            }\n            // console.log('New nearest star point: ', intersect);\n            nearestStarPointIntersect = intersect\n          } else {\n            if (nearestPointIntersect &&\n                nearestPointIntersect.distance < dist) {\n              continue\n            }\n            // console.log('New nearest point: ', intersect);\n            nearestPointIntersect = intersect\n          }\n        } break\n        case 'Group': {\n          // console.log('GROUP CLICKED');\n        } break\n        default: {\n          // console.log('Raycasting default handler for object type: ', obj.type);\n          if (nearestDefaultIntersect &&\n              nearestDefaultIntersect.distance < dist) {\n            continue\n          }\n          // console.log('New nearest default: ', intersect);\n          nearestDefaultIntersect = intersect\n        }\n      }\n    }\n    const nearestIntersect = nearestMeshIntersect ? nearestMeshIntersect :\n      nearestPointIntersect ? nearestPointIntersect :\n      nearestStarPointIntersect ? nearestStarPointIntersect :\n      nearestDefaultIntersect ? nearestDefaultIntersect :\n      null\n    if (!nearestIntersect) {\n      throw new Error('Picking did not yield an intersect.  Intersects: ', intersects)\n    }\n    let obj = nearestIntersect.object\n    // console.log('Nearest object type: ', obj.isStarPoints ? '<star points>' : obj.type);\n    let firstName\n    do {\n      if (obj.name || (obj.props && obj.props.name) && !firstName) {\n        firstName = obj.name || (obj.props && obj.props.name)\n      }\n      if (obj.onClick) {\n        obj.onClick(mouse, nearestIntersect, obj)\n        break\n      }\n      if (obj == obj.parent) {\n        console.error('no clickable object found in path to root.')\n        break\n      }\n    } while (obj = obj.parent)\n  }\n\n\n  toggleAsterisms() {\n    if (this.asterisms == null) {\n      const asterisms = new Asterisms(this.stars, () => {\n        this.stars.add(asterisms)\n        console.log(`Asterisms count:`, asterisms.catalog.numAsterisms)\n        this.asterisms = asterisms\n      })\n    }\n    if (this.asterisms) {\n      this.asterisms.visible = !this.asterisms.visible\n    }\n  }\n\n\n  toggleOrbits() {\n    Utils.visitToggleProperty(this.objects['sun'], 'name', 'orbit', 'visible')\n  }\n\n\n  togglePlanetLabels() {\n    Utils.visitToggleProperty(this.objects['sun'], 'name', 'label', 'visible')\n  }\n\n\n  toggleStarLabels() {\n    this.stars.labelLOD.visible = !this.stars.labelLOD.visible\n  }\n\n\n  newGalaxy(galaxyProps) {\n    const group = this.newObject(galaxyProps.name, galaxyProps, (click) => {\n      // console.log('Well done, you found the galaxy!');\n    })\n    this.objects[galaxyProps.name + '.orbitPosition'] = group\n    return group\n  }\n}\n", "import * as THREE from 'three'\nimport Animation from './Animation.js'\nimport ControlPanel from './ControlPanel.js'\nimport Keys from './Keys.js'\nimport Loader from './Loader.js'\nimport Reify from './reify.js'\nimport Scene from './Scene.js'\nimport * as Shapes from './shapes.js'\nimport ThreeUi from './ThreeUI.js'\nimport Time from './Time.js'\nimport * as Shared from './shared.js'\nimport * as Utils from './utils.js'\n\n\nconst DEFAULT_TARGET = 'sun'\nconst elt = (id) => {\n  return document.getElementById(id)\n}\n\n/** Main application class. */\nexport default class Celestiary {\n  constructor(canvasContainer, navElt, setTimeStr) {\n    Utils.assertArgs(arguments, 3)\n    this.time = new Time(setTimeStr)\n    this.animation = new Animation(this.time)\n    canvasContainer.style.width = window.innerWidth + 'px'\n    canvasContainer.style.height = window.innerHeight + 'px'\n    const animCb = (scene) => {\n      this.animation.animate(scene)\n      if (Shared.targets.track) {\n        this.scene.lookAtTarget()\n      }\n    }\n    this.ui = new ThreeUi(canvasContainer, animCb)\n    this.scene = new Scene(this.ui)\n    this.loader = new Loader()\n    this.controlPanel = new ControlPanel(navElt, this.loader)\n    this.load()\n    this.setupListeners()\n    this.navVisible = true\n    // these are here for convenience debugging from jsconsole.\n    this.shared = Shared\n    this.shapes = Shapes\n    this.three = THREE\n    this.utils = Utils\n    this.toggleHelp = null\n    window.c = this\n  }\n\n\n  getTime() {\n    if (this.time === null) {\n      throw new Error('Null time')\n    }\n    return this.time\n  }\n\n\n  load() {\n    this.onLoadCb = (name, obj) => {\n      Reify(obj)\n      this.scene.add(obj)\n    }\n\n    this.onDoneCb = (path, obj) => {\n      this.controlPanel.showNavDisplay(path.split('/'), this.loader)\n      // TODO(pablo): Hack to handle load order.  The path is loaded,\n      // but not yet animated so positions will be incorrect.  So\n      // schedule this after the next pass.\n      setTimeout(() => {\n        const parts = path.split('/')\n        let targetName = parts[parts.length - 1]\n        if (targetName.indexOf('-') >= 0) {\n          targetName = targetName.split('-')[0]\n        }\n        this.scene.targetNamed(targetName)\n        this.scene.goTo()\n      }, 0)\n    }\n\n    let path\n    if (location.hash) {\n      path = location.hash.substring(1)\n    } else {\n      path = DEFAULT_TARGET\n      location.hash = path\n    }\n    this.loader.loadPath('milkyway', this.onLoadCb, () => {\n      this.loader.loadPath(path, this.onLoadCb, this.onDoneCb, () => {\n        // On error.\n        setTimeout(() => {\n          location.hash = DEFAULT_TARGET\n        }, 1000)\n      })\n    })\n  }\n\n\n  goTo() {\n    const tObj = this.shared.targets.obj\n    if (tObj) {\n      if (tObj.props && tObj.props.name) {\n        const path = this.loader.pathByName[tObj.props.name]\n        if (path) {\n          window.location.hash = path\n        } else {\n          console.error(`no loaded path for ${tObj.props.name}: ${path}`)\n        }\n      } else {\n        console.error('target obj has no name prop: ', tObj)\n      }\n    } else {\n      console.error('no target obj!')\n    }\n  }\n\n\n  setupListeners() {\n    window.addEventListener('hashchange', (e) => {\n      this.loader.loadPath((window.location.hash || '#').substring(1), this.onLoadCb, this.onDoneCb)\n    },\n    false)\n\n    const k = new Keys()\n    k.map('Escape', () => {\n      this.hideActiveDialog()\n    },\n    'Hide active dialog')\n    k.map(' ', () => {\n      this.time.togglePause()\n    },\n    'Toggle time pause')\n    k.map(',', () => {\n      this.ui.multFov(0.9)\n    },\n    'Narrow field-of-vision')\n    k.map('.', () => {\n      this.ui.multFov(1.1)\n    },\n    'Broaden field-of-vision')\n    k.map('/', () => {\n      this.ui.resetFov()\n    },\n    'Reset field-of-vision to ' + Shared.INITIAL_FOV + '\u00BA')\n    k.map('0', () => {\n      this.scene.targetCurNode()\n    },\n    'Target current system')\n    for (let i = 1; i <= 9; i++) {\n      k.map(''+i, () => {\n        const ndx = i; this.scene.targetNode(ndx)\n      },\n      `Look at child ${i} of current system`)\n    }\n    k.map(';', () => {\n      this.time.changeTimeScale(0)\n    },\n    'Change time scale to real-time')\n    k.map('c', () => {\n      this.scene.lookAtTarget()\n    },\n    'Look at target')\n    k.map('f', () => {\n      this.scene.follow()\n    },\n    'Follow current node')\n    k.map('g', () => {\n      this.goTo()\n    },\n    'Go to target node')\n    k.map('j', () => {\n      this.time.invertTimeScale()\n    },\n    'Reverse time')\n    k.map('k', () => {\n      this.time.changeTimeScale(-1)\n    },\n    'Slow down time')\n    k.map('l', () => {\n      this.time.changeTimeScale(1)\n    },\n    'Speed up time')\n    k.map('n', () => {\n      this.time.setTimeToNow()\n    },\n    'Set time to now')\n    k.map('t', () => {\n      this.scene.track()\n    },\n    'Track target node')\n    k.map('u', () => {\n      this.scene.targetParent()\n    },\n    'Look at parent of current system')\n    k.map('A', () => {\n      this.scene.toggleAsterisms()\n    },\n    'Show/hide asterisms')\n    k.map('O', () => {\n      this.scene.toggleOrbits()\n    },\n    'Show/hide orbits')\n    k.map('P', () => {\n      this.scene.togglePlanetLabels()\n    },\n    'Show/hide planet and moon names')\n    k.map('S', () => {\n      this.scene.toggleStarLabels()\n    },\n    'Show/hide star names')\n    k.map('V', () => {\n      const panels = [elt('nav-id'), elt('top-right')]\n      panels.map((panel) => {\n        panel.style.visibility = this.navVisible ? 'hidden' : 'visible'\n      })\n      this.navVisible = !this.navVisible\n    }, 'Show/hide navigation panels')\n    this.keys = k\n  }\n\n\n  hideActiveDialog() {\n    document.querySelectorAll('.dialog').forEach((elt) => this.hideElt(elt))\n  }\n\n\n  hideElt(elt) {\n    elt.style.display = 'none'\n  }\n\n\n  /** @return True iff showing */\n  toggleEltDisplay(elt) {\n    if (elt.style.display == 'block') {\n      this.hideElt(elt)\n      return false\n    } else {\n      this.hideActiveDialog()\n      elt.style.display = 'block'\n      return true\n    }\n  }\n\n\n  hideHelpOnEscape() {\n    const keysElt = elt('keys-id')\n    keysElt.style.display = 'none'\n  }\n}\n", "import React from 'react'\n\n\nfunction updateTimeMsg(time) {\n  let msg = ''\n  if (time.timeScale == 1) {\n    msg = 'real-time'\n  } else {\n    msg = time.timeScale.toLocaleString() + ' secs/s'\n  }\n  if (time.pause) {\n    msg += ' (paused)'\n  }\n  return msg\n}\n\n\nexport default function TimePanel({time, timeStr}) {\n  const [timeScale, setTimeScale] = React.useState('')\n  React.useEffect(() => {\n    setTimeScale(updateTimeMsg(time))\n  }, [timeStr]) // TODO: shouldn't depend on this to set time-scale.\n  return (\n    <div id=\"time-id\">\n      <div id=\"date-id\">{timeStr}</div>\n      <div id=\"time-scale-id\">{timeScale}</div>\n      <div id=\"time-controls-id\">\n        <button onClick={() => {\n          time.changeTimeScale(1)\n        }}>+</button>\n        <button onClick={() => {\n          time.changeTimeScale(-1)\n        }}>-</button>\n        <button onClick={() => {\n          time.changeTimeScale(0)\n        }}>=</button>\n        <button onClick={() => {\n          time.invertTimeScale()\n        }}>/</button>\n      </div>\n    </div>)\n}\n"],
  "mappings": "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",
  "names": []
}
